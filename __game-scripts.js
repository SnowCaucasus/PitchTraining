class SoundLibrary{static latency=.15;static analyzeSound(r,e){var t=e.length/4,a=0,n=0,c=[],s=0;for(let r=0;r<t;r++){for(let c=0;c<t;c++)a+=e[c]*e[c+r],n+=e[c]*e[c]+e[c+r]*e[c+r];c[r]=0!=n?2*a/n:0,a=0,n=0,s+=Math.abs(e[r])}s/=t;var u=[],i=[],h=0,d=0;for(let r=5;r<500;r++)c[r-1]<=c[r]&&c[r]>c[r+1]&&(i.push(c[r]),u.push(r),c[r]>d&&(d=c[r]));for(let r=i.length-1;r>=0;r--)i[r]>.9*d&&(h=u[r]);if(0==h||s<.01)return 0;var l=[h-1,h,h+1],m=[c[h-1],c[h],c[h+1]],o=((m[0]-m[1])*(l[0]-l[2])-(m[0]-m[2])*(l[0]-l[1]))/((l[0]-l[1])*(l[0]-l[2])*(l[1]-l[2])),C=-((m[0]-m[1])/(l[0]-l[1])-o*(l[0]+l[1]))/(2*o);return C>0?r/C:0}static convertHertzToScale(r){return 0==r?-256:12*Math.log2(r)-81.37632}static convertScaleToString(r){var e=Math.round(r);if(Module.viewhiA)switch(e){case-11:return"lowA#";case-10:return"lowB";case-9:return"lowC";case-8:return"lowC#";case-7:return"lowD";case-6:return"lowD#";case-5:return"lowE";case-4:return"lowF";case-3:return"lowF#";case-2:return"lowG";case-1:return"lowG#";case 0:return"mid1A";case 1:return"mid1A#";case 2:return"mid1B";case 3:return"mid1C";case 4:return"mid1C#";case 5:return"mid1D";case 6:return"mid1D#";case 7:return"mid1E";case 8:return"mid1F";case 9:return"mid1F#";case 10:return"mid1G";case 11:return"mid1G#";case 12:return"mid2A";case 13:return"mid2A#";case 14:return"mid2B";case 15:return"mid2C";case 16:return"mid2C#";case 17:return"mid2D";case 18:return"mid2D#";case 19:return"mid2E";case 20:return"mid2F";case 21:return"mid2F#";case 22:return"mid2G";case 23:return"mid2G#";case 24:return"hiA";case 25:return"hiA#";case 26:return"hiB";case 27:return"hiC";case 28:return"hiC#";case 29:return"hiD";case 30:return"hiD#";case 31:return"hiE";case 32:return"hiF";case 33:return"hiF#";case 34:return"hiG";case 35:return"hiG#";case 36:return"hiA";case 37:return"hihiA#";case 38:return"hihiB";case 39:return"hihiC";case 40:return"hihiC#";case 41:return"hihiD";case 42:return"hihiD#";case 43:return"hihiE";case 44:return"hihiF";case 45:return"hihiF#";case 46:return"hihiG";case 47:return"hihiG#"}else switch(e){case-11:return"A#1";case-10:return"B1";case-9:return"C2";case-8:return"C#2";case-7:return"D2";case-6:return"D#2";case-5:return"E2";case-4:return"F2";case-3:return"F#2";case-2:return"G2";case-1:return"G#2";case 0:return"A2";case 1:return"A#2";case 2:return"B2";case 3:return"C3";case 4:return"C#3";case 5:return"D3";case 6:return"D#3";case 7:return"E3";case 8:return"F3";case 9:return"F#3";case 10:return"G3";case 11:return"G#3";case 12:return"A3";case 13:return"A#3";case 14:return"B3";case 15:return"C4";case 16:return"C#4";case 17:return"D4";case 18:return"D#4";case 19:return"E4";case 20:return"F4";case 21:return"F#4";case 22:return"G4";case 23:return"G#4";case 24:return"A4";case 25:return"A#4";case 26:return"B4";case 27:return"C5";case 28:return"C#5";case 29:return"D5";case 30:return"D#5";case 31:return"E5";case 32:return"F5";case 33:return"F#5";case 34:return"G5";case 35:return"G#5";case 36:return"A5";case 37:return"A#5";case 38:return"B5";case 39:return"C6";case 40:return"C#6";case 41:return"D6";case 42:return"D#6";case 43:return"E6";case 44:return"F6";case 45:return"F#6";case 46:return"G6";case 47:return"G#6"}return""}}"undefined"!=typeof document&&(
/*! FPSMeter 0.3.1 - 9th May 2013 | https://github.com/Darsain/fpsmeter */
function(t,e){function s(t,e){for(var n in e)try{t.style[n]=e[n]}catch(t){}return t}function H(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function R(t,e){if("array"!==H(e))return-1;if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}function I(){var t,e=arguments;for(t in e[1])if(e[1].hasOwnProperty(t))switch(H(e[1][t])){case"object":e[0][t]=I({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return 2<e.length?I.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function N(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function S(t,e,n,o){t.addEventListener?t[o?"removeEventListener":"addEventListener"](e,n,!1):t.attachEvent&&t[o?"detachEvent":"attachEvent"]("on"+e,n)}function D(t,e){function g(t,e,n,o){return h[0|t][Math.round(Math.min((e-n)/(o-n)*M,M))]}function r(){F.legend.fps!==q&&(F.legend.fps=q,F.legend[c]=q?"FPS":"ms"),b=q?v.fps:v.duration,F.count[c]=999<b?"999+":b.toFixed(99<b?0:O.decimals)}function m(){for(l=n(),P<l-O.threshold&&(v.fps-=v.fps/Math.max(1,60*O.smoothing/O.interval),v.duration=1e3/v.fps),w=O.history;w--;)T[w]=0===w?v.fps:T[w-1],j[w]=0===w?v.duration:j[w-1];if(r(),O.heat){if(z.length)for(w=z.length;w--;)z[w].el.style[o[z[w].name].heatOn]=q?g(o[z[w].name].heatmap,v.fps,0,O.maxFps):g(o[z[w].name].heatmap,v.duration,O.threshold,0);if(F.graph&&o.column.heatOn)for(w=C.length;w--;)C[w].style[o.column.heatOn]=q?g(o.column.heatmap,T[w],0,O.maxFps):g(o.column.heatmap,j[w],O.threshold,0)}if(F.graph)for(y=0;y<O.history;y++)C[y].style.height=(q?T[y]?Math.round(x/O.maxFps*Math.min(T[y],O.maxFps)):0:j[y]?Math.round(x/O.threshold*Math.min(j[y],O.threshold)):0)+"px"}function k(){20>O.interval?(p=i(k),m()):(p=setTimeout(k,O.interval),f=i(m))}function G(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),v.toggle()}function U(){O.toggleOn&&S(F.container,O.toggleOn,G,1),t.removeChild(F.container)}function V(){if(F.container&&U(),o=D.theme[O.theme],!(h=o.compiledHeatmaps||[]).length&&o.heatmaps.length){for(y=0;y<o.heatmaps.length;y++)for(h[y]=[],w=0;w<=M;w++){var e,n=h[y],a=w;e=.33/M*w;var i=o.heatmaps[y].saturation,l=o.heatmaps[y].lightness,p=void 0,c=void 0,u=void 0,d=u=void 0,f=p=c=void 0;f=void 0;0===(u=.5>=l?l*(1+i):l+i-l*i)?e="#000":(c=(u-(d=2*l-u))/u,f=(e*=6)-(p=Math.floor(e)),f*=u*c,0===p||6===p?(p=u,c=d+f,u=d):1===p?(p=u-f,c=u,u=d):2===p?(p=d,c=u,u=d+f):3===p?(p=d,c=u-f):4===p?(p=d+f,c=d):(p=u,c=d,u-=f),e="#"+N(p)+N(c)+N(u)),n[a]=e}o.compiledHeatmaps=h}for(var b in F.container=s(document.createElement("div"),o.container),F.count=F.container.appendChild(s(document.createElement("div"),o.count)),F.legend=F.container.appendChild(s(document.createElement("div"),o.legend)),F.graph=O.graph?F.container.appendChild(s(document.createElement("div"),o.graph)):0,z.length=0,F)F[b]&&o[b].heatOn&&z.push({name:b,el:F[b]});if(C.length=0,F.graph)for(F.graph.style.width=O.history*o.column.width+(O.history-1)*o.column.spacing+"px",w=0;w<O.history;w++)C[w]=F.graph.appendChild(s(document.createElement("div"),o.column)),C[w].style.position="absolute",C[w].style.bottom=0,C[w].style.right=w*o.column.width+w*o.column.spacing+"px",C[w].style.width=o.column.width+"px",C[w].style.height="0px";s(F.container,O),r(),t.appendChild(F.container),F.graph&&(x=F.graph.clientHeight),O.toggleOn&&("click"===O.toggleOn&&(F.container.style.cursor="pointer"),S(F.container,O.toggleOn,G))}"object"===H(t)&&undefined===t.nodeType&&(e=t,t=document.body),t||(t=document.body);var o,h,l,p,f,x,b,w,y,v=this,O=I({},D.defaults,e||{}),F={},C=[],M=100,z=[],E=O.threshold,A=0,P=n()-E,T=[],j=[],q="fps"===O.show;v.options=O,v.fps=0,v.duration=0,v.isPaused=0,v.tickStart=function(){A=n()},v.tick=function(){l=n(),E+=(l-P-E)/O.smoothing,v.fps=1e3/E,v.duration=A<P?E:l-A,P=l},v.pause=function(){return p&&(v.isPaused=1,clearTimeout(p),a(p),a(f),p=f=0),v},v.resume=function(){return p||(v.isPaused=0,k()),v},v.set=function(t,e){return O[t]=e,q="fps"===O.show,-1!==R(t,u)&&V(),-1!==R(t,d)&&s(F.container,O),v},v.showDuration=function(){return v.set("show","ms"),v},v.showFps=function(){return v.set("show","fps"),v},v.toggle=function(){return v.set("show",q?"ms":"fps"),v},v.hide=function(){return v.pause(),F.container.style.display="none",v},v.show=function(){return v.resume(),F.container.style.display="block",v},v.destroy=function(){v.pause(),U(),v.tick=v.tickStart=function(){}},V(),k()}var n,o=t.performance;n=o&&(o.now||o.webkitNow)?o[o.now?"now":"webkitNow"].bind(o):function(){return+new Date};for(var a=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,i=t.requestAnimationFrame,h=0,l=0,p=(o=["moz","webkit","o"]).length;l<p&&!a;++l)i=(a=t[o[l]+"CancelAnimationFrame"]||t[o[l]+"CancelRequestAnimationFrame"])&&t[o[l]+"RequestAnimationFrame"];a||(i=function(e){var o=n(),a=Math.max(0,16-(o-h));return h=o+a,t.setTimeout((function(){e(o+a)}),a)},a=function(t){clearTimeout(t)});var c="string"===H(document.createElement("div").textContent)?"textContent":"innerText";D.extend=I,window.FPSMeter=D,D.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var u=["toggleOn","theme","heat","graph","history"],d="position zIndex left top right bottom margin".split(" ")}(window),function(t,e){e.theme={};var n=e.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};e.theme.dark=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),e.theme.light=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),e.theme.colorful=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),e.theme.transparent=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter));var Fps=pc.createScript("fps");Fps.prototype.initialize=function(){this.fps=new FPSMeter({heat:!0,graph:!0})},Fps.prototype.update=function(t){this.fps.tick()};var RadialMask=pc.createScript("radialMask"),anim=!1,t=0;RadialMask.prototype.initialize=function(){this._element=this.entity.element,this._element.material=this._element.material.clone(),this.setFillAmount(0)},RadialMask.prototype.update=function(i){if(!this.anim)return;this.t+=i;let e=EMath.correct3(this.t);this.setFillAmount(e),this.t>1&&(this.anim=!1,this.enabled=!1)},RadialMask.prototype.setFillAmount=function(i){this._element.material.alphaTest=1-i},RadialMask.prototype.fire=function(){this.anim=!0,this.t=0},RadialMask.prototype.light=function(){this._element.material.alphaTest=0};class EMath{static correct3(t){return(t=pc.math.clamp(t,0,1))<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}static _correct3(t){return t<=.5?2*t*t:-2*(t-1)*(t-1)+1}static correct2Out(t){return t*(2-t)}static lerp(t,r,a){return t+(r-t)*a}static inverseLerp(t,r,a){return 1/(r-t)*(a-t)}static sin(t,r,a,e){return r+(a-r)*((Math.sin(2*Math.PI/e*t-Math.PI/2)+1)/2)}static repeat(t,r,a){for(var e=a-r+1;t<e;)t+=e;return(t+(e-r))%e+r}static maxN(t){for(var r=0,a=0;a<t.length;a++)t[a]>=t[r]&&(r=a);return r}}var image,anim,minAlpha,maxAlpha,ImageFrash=pc.createScript("imageFrash"),t=0;ImageFrash.prototype.initialize=function(){this.t=0,this.image=this.entity.findComponent("element")._image,this.image.opacity=0,this.minAlpha=0,this.maxAlpha=1},ImageFrash.prototype.update=function(i){this.anim&&(this.t+=i,this.image.opacity=EMath.sin(this.t,this.minAlpha,this.maxAlpha,.13333),this.t>=.3333&&(this.anim=!1,this.image.opacity=this.maxAlpha,this.enabled=!1))},ImageFrash.prototype.fire=function(i,a){this.anim=!0,this.minAlpha=i,this.maxAlpha=a},ImageFrash.prototype.light=function(i){this.image.opacity=i};var text,anim,TextFrash=pc.createScript("textFrash"),t=0;TextFrash.prototype.initialize=function(){this.t=0,this.text=this.entity.findComponent("element")._text,this.text.opacity=0},TextFrash.prototype.update=function(i){this.anim&&(this.t+=i,this.text.opacity=.5*(Math.sin(30*Math.PI*(this.t-1/60))+1),this.t>=7/30&&(this.anim=!1,this.text.opacity=1,this.enabled=!1))},TextFrash.prototype.fire=function(){this.anim=!0},TextFrash.prototype.light=function(){this.text.opacity=1};var key,keyMask,tempoText,rangeText,st,screenOpen,screenMaskElement,TitleManager=pc.createScript("titleManager");TitleManager.attributes.add("keyMaskEntity",{type:"entity",title:"keyMask",array:!0}),TitleManager.attributes.add("tempoEntity",{type:"entity",title:"TempoLabel"}),TitleManager.attributes.add("rangeEntity",{type:"entity",title:"rangeLabel"}),TitleManager.attributes.add("screenMask",{type:"entity",title:"screenMask"}),TitleManager.prototype.initialize=function(){this.keyMask=[];for(var e=0;e<48;e++)this.keyMask[e]=this.keyMaskEntity[e].findComponent("element")._image;if(this.tempoText=this.tempoEntity.findComponent("element"),this.rangeText=this.rangeEntity.findComponent("element"),!Module.play){let e=this.app;this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),e.autoRender=!1,this.intervalId=setInterval((function(){e.renderNextFrame=!0}),1e3/30)}Module.gameFinish=!1,Module.play?(this.viewTempo(Module.tempo),this.key=Module.range,this.changeKey(),this.screenOpen=!0,this.st=0):this.screenMask.element.opacity=0,this.microphoneReady()},TitleManager.prototype.microphoneReady=async function(){await navigator.mediaDevices.getUserMedia({audio:!0})},TitleManager.prototype.update=function(e){if(this.screenOpen){if(this.st>=1)return this.screenOpen=!1,void(this.screenMask.element.opacity=0);this.st+=2*e,this.screenMask.element.opacity=1-this.st}},TitleManager.prototype.selectKey=function(e){this.key=e},TitleManager.prototype.changeKey=function(){for(let e=0;e<48;e++)this.keyMask[e].opacity=0;if(null!=this.key){for(let e=0;e<=12;e++)this.keyMask[e+(this.key+9)].opacity=.5;this.rangeText.text=SoundLibrary.convertScaleToString(this.key)+" - "+SoundLibrary.convertScaleToString(this.key+12),Module.range=this.key}},TitleManager.prototype.viewTempo=function(e){switch(e){case 0:this.tempoText.text="= 60";break;case 1:this.tempoText.text="= 80";break;case 2:this.tempoText.text="= 100";break;case 3:this.tempoText.text="= 120";break;case 4:this.tempoText.text="= 140"}};var anim,t,animID,box,header,headerText,headerTriangle,icon,lowText,hiText,triangle,PartAnimation=pc.createScript("partAnimation");PartAnimation.attributes.add("contents",{type:"entity",title:"Header",array:!0}),PartAnimation.prototype.initialize=function(){this.anim=!1,this.t=0,this.animID=0,this.box=this.contents[0].findComponent("element"),this.header=this.contents[1].findComponent("element"),this.headerText=this.contents[2].findComponent("script"),this.headerTriangle=this.contents[3].findComponent("script"),this.icon=this.contents[4].findComponent("script"),this.lowText=this.contents[5].findComponent("script"),this.hiText=this.contents[6].findComponent("script"),this.triangle=this.contents[7].findComponent("script"),this.box.height=0,this.header.width=0},PartAnimation.prototype.update=function(i){this.anim&&(this.t+=i,this.boxAnimation(),this.headerAnimation(),0==this.animID&&this.t>=.41666&&(this.triangle.imageFrash.fire(.5,1),this.animID++),1==this.animID&&this.t>=.83333&&(this.icon.imageFrash.fire(.5,1),this.lowText.textFrash.fire(),this.hiText.textFrash.fire(),this.animID++),2==this.animID&&this.t>=1&&(this.headerText.textFrash.fire(),this.animID++),3==this.animID&&this.t>=1.1666&&(this.headerTriangle.imageFrash.fire(.5,1),this.animID++))},PartAnimation.prototype.fire=function(){this.anim=!0},PartAnimation.prototype.light=function(){this.triangle.imageFrash.light(1),this.icon.imageFrash.light(1),this.lowText.textFrash.light(),this.hiText.textFrash.light(),this.headerText.textFrash.light(),this.headerTriangle.imageFrash.light(1),this.box.height=250,this.header.width=150},PartAnimation.prototype.boxAnimation=function(){var i=EMath.inverseLerp(0,.8333,this.t);this.box.height=250*EMath.correct3(i)},PartAnimation.prototype.headerAnimation=function(){var i=EMath.inverseLerp(.8333,1.16666,this.t);this.header.width=150*EMath.correct3(i)};var PartCanvasAnimator=pc.createScript("partCanvasAnimator");PartCanvasAnimator.attributes.add("contents",{type:"entity",title:"contents",array:!0});var t=0,eventCount=0;PartCanvasAnimator.prototype.initialize=function(){if(Module.play)return this.contents[0].findComponent("script").partAnimation.light(),this.contents[1].findComponent("script").partAnimation.light(),this.contents[2].findComponent("script").partAnimation.light(),this.contents[3].findComponent("script").partAnimation.light(),this.contents[4].findComponent("script").partAnimation.light(),this.contents[5].findComponent("script").partAnimation.light(),this.contents[6].findComponent("script").tempoCanvasAnimator.light(),void(this.enabled=!1);this.t=-.5,this.eventCount=0},PartCanvasAnimator.prototype.update=function(n){(this.t+=n,0==this.eventCount&&this.t>=0&&this.fireContent(0),1==this.eventCount&&this.t>=.08333&&this.fireContent(1),2==this.eventCount&&this.t>=.16666&&this.fireContent(2),3==this.eventCount&&this.t>=.25&&this.fireContent(3),4==this.eventCount&&this.t>=.33333&&this.fireContent(4),5==this.eventCount&&this.t>=.41666&&this.fireContent(5),6==this.eventCount&&this.t>=1)&&(this.contents[6].findComponent("script").tempoCanvasAnimator.fire(),this.eventCount++)},PartCanvasAnimator.prototype.fireContent=function(n){this.contents[n].findComponent("script").partAnimation.fire(),this.eventCount++};var TempoCanvasAnimator=pc.createScript("tempoCanvasAnimator");TempoCanvasAnimator.attributes.add("contents",{type:"entity",title:"contents",array:!0});var anim=!1,t=0,fired=[];TempoCanvasAnimator.prototype.initialize=function(){this.anim=!1,this.t=0,this.fired=[]},TempoCanvasAnimator.prototype.update=function(i){this.anim&&(this.t+=i,!this.fired[0]&&this.t>=0&&this.fireContent(0),!this.fired[1]&&this.t>=.08333&&this.fireContent(1),!this.fired[2]&&this.t>=.16666&&this.fireContent(2),!this.fired[3]&&this.t>=.25&&this.fireContent(3),!this.fired[4]&&this.t>=.33333&&this.fireContent(4),!this.fired[5]&&this.t>=.5&&this.fireFrash(5),!this.fired[6]&&this.t>=.58333&&this.fireFrash(6),!this.fired[7]&&this.t>=.66666&&this.fireFrash(7),!this.fired[8]&&this.t>=.75&&this.fireFrash(8),!this.fired[9]&&this.t>=.83333&&this.fireFrash(9),!this.fired[10]&&this.t>=.76666&&this.iconFrash(10),!this.fired[11]&&this.t>=.85&&this.iconFrash(11),!this.fired[12]&&this.t>=.93333&&this.iconFrash(12),!this.fired[13]&&this.t>=1.01666&&this.iconFrash(13),!this.fired[14]&&this.t>=1.1&&this.iconFrash(14),!this.fired[15]&&this.t>=.75&&this.textFrash(15),!this.fired[16]&&this.t>=.83333&&this.textFrash(16),!this.fired[17]&&this.t>=.91666&&this.textFrash(17),!this.fired[18]&&this.t>=1&&this.textFrash(18),!this.fired[19]&&this.t>=1.08333&&this.textFrash(19),!this.fired[20]&&this.t>=.5&&(this.contents[20].findComponent("script").optionCanvasAnimator.fire(),this.fired[20]=!0))},TempoCanvasAnimator.prototype.fire=function(){this.anim=!0},TempoCanvasAnimator.prototype.light=function(){this.contents[0].findComponent("script").radialMask.light(),this.contents[1].findComponent("script").radialMask.light(),this.contents[2].findComponent("script").radialMask.light(),this.contents[3].findComponent("script").radialMask.light(),this.contents[4].findComponent("script").radialMask.light(),this.contents[5].findComponent("script").imageFrash.light(0==Module.tempo?1:.5),this.contents[6].findComponent("script").imageFrash.light(1==Module.tempo?1:.5),this.contents[7].findComponent("script").imageFrash.light(2==Module.tempo?1:.5),this.contents[8].findComponent("script").imageFrash.light(3==Module.tempo?1:.5),this.contents[9].findComponent("script").imageFrash.light(4==Module.tempo?1:.5),this.contents[10].findComponent("script").imageFrash.light(1),this.contents[11].findComponent("script").imageFrash.light(1),this.contents[12].findComponent("script").imageFrash.light(1),this.contents[13].findComponent("script").imageFrash.light(1),this.contents[14].findComponent("script").imageFrash.light(1),this.contents[15].findComponent("script").textFrash.light(),this.contents[16].findComponent("script").textFrash.light(),this.contents[17].findComponent("script").textFrash.light(),this.contents[18].findComponent("script").textFrash.light(),this.contents[19].findComponent("script").textFrash.light(),this.contents[20].findComponent("script").optionCanvasAnimator.light(),this.contents[Module.tempo+10].findComponent("element").color=new pc.Color(1,1,1,1)},TempoCanvasAnimator.prototype.fireContent=function(i){this.contents[i].findComponent("script").radialMask.fire(),this.fired[i]=!0},TempoCanvasAnimator.prototype.fireFrash=function(i){this.contents[i].findComponent("script").imageFrash.fire(.25,Module.tempo==i-5?1:.5),this.fired[i]=!0},TempoCanvasAnimator.prototype.iconFrash=function(i){(this.contents[i].findComponent("script").imageFrash.fire(.5,1),this.fired[i]=!0,Module.tempo==i-10)&&(this.contents[i].findComponent("element").color=new pc.Color(1,1,1,1))},TempoCanvasAnimator.prototype.textFrash=function(i){this.contents[i].findComponent("script").textFrash.fire(),this.fired[i]=!0};var anim,t,fired,OptionCanvasAnimator=pc.createScript("optionCanvasAnimator");OptionCanvasAnimator.attributes.add("contents",{type:"entity",title:"contents",array:!0}),OptionCanvasAnimator.prototype.initialize=function(){this.anim=!1,this.t=0,this.fired=[]},OptionCanvasAnimator.prototype.update=function(i){this.anim&&(this.t+=i,!this.fired[0]&&this.t>=0&&this.radialMask(0),!this.fired[1]&&this.t>=.16666&&this.radialMask(1),!this.fired[2]&&this.t>=.33333&&this.radialMask(2),!this.fired[3]&&this.t>=.5&&this.radialMask(3),!this.fired[4]&&this.t>=.58333&&this.radialMask(4),!this.fired[5]&&this.t>=.5&&this.textFrash(5),!this.fired[6]&&this.t>=.58333&&this.textFrash(6),!this.fired[7]&&this.t>=.66666&&this.textFrash(7),!this.fired[8]&&this.t>=.83333&&this.textFrash(8),!this.fired[9]&&this.t>=1&&this.textFrash(9),!this.fired[10]&&this.t>=1&&this.textFrash(10),!this.fired[11]&&this.t>=1&&this.imageFrash(11),!this.fired[12]&&this.t>=.3333&&this.imageFade(12),!this.fired[13]&&this.t>=.5&&this.imageFade(13),!this.fired[14]&&this.t>=.6666&&this.imageFade(14),!this.fired[15]&&this.t>=.5&&this.imageFade(15),!this.fired[16]&&this.t>=.6666&&this.imageFade(16),!this.fired[17]&&this.t>=.8333&&this.imageFade(17),!this.fired[18]&&this.t>=.8333&&this.imageFade(18),!this.fired[19]&&this.t>=1.1&&(this.imageFrash(19),this.textFrash(20),this.anim=!1))},OptionCanvasAnimator.prototype.fire=function(){this.anim=!0},OptionCanvasAnimator.prototype.light=function(){this.contents[0].findComponent("script").radialMask.light(),this.contents[1].findComponent("script").radialMask.light(),this.contents[2].findComponent("script").radialMask.light(),this.contents[3].findComponent("script").radialMask.light(),this.contents[4].findComponent("script").radialMask.light(),this.contents[5].findComponent("script").textFrash.light(),this.contents[6].findComponent("script").textFrash.light(),this.contents[7].findComponent("script").textFrash.light(),this.contents[8].findComponent("script").textFrash.light(),this.contents[9].findComponent("script").textFrash.light(),this.contents[10].findComponent("script").textFrash.light(),this.contents[11].findComponent("script").imageFrash.light(1),this.contents[12].findComponent("script").imageFade.light(1),this.contents[13].findComponent("script").imageFade.light(1),this.contents[14].findComponent("script").imageFade.light(1),this.contents[15].findComponent("script").imageFade.light(1),this.contents[16].findComponent("script").imageFade.light(1),this.contents[17].findComponent("script").imageFade.light(1),this.contents[18].findComponent("script").imageFade.light(1),this.contents[19].findComponent("script").imageFrash.light(1),this.contents[20].findComponent("script").textFrash.light()},OptionCanvasAnimator.prototype.radialMask=function(i){this.contents[i].findComponent("script").radialMask.fire(),this.fired[i]=!0},OptionCanvasAnimator.prototype.textFrash=function(i){this.contents[i].findComponent("script").textFrash.fire(),this.fired[i]=!0},OptionCanvasAnimator.prototype.imageFrash=function(i){this.contents[i].findComponent("script").imageFrash.fire(.5,1),this.fired[i]=!0},OptionCanvasAnimator.prototype.imageFade=function(i){this.contents[i].findComponent("script").imageFade.fire(!0),this.fired[i]=!0};var image,anim,t,fadein,sa,ea,ImageFade=pc.createScript("imageFade");ImageFade.attributes.add("defaultAlpha",{type:"number",title:"defaultAlpha"}),ImageFade.prototype.initialize=function(){this.image=this.entity.findComponent("element")._image,this.anim=!1,this.t=0,this.fadein=!1},ImageFade.prototype.update=function(a){this.anim&&(this.t+=a,this.image.opacity=pc.math.lerp(this.sa,this.ea,this.t),this.t>=1&&(this.image.opacity=this.ea,this.anim=!1,this.enabled=!1))},ImageFade.prototype.fire=function(a){this.anim=!0,a?(this.sa=0,this.ea=this.defaultAlpha):(this.sa=this.defaultAlpha,this.ea=0)},ImageFade.prototype.light=function(a){this.image.opacity=a?this.defaultAlpha:0};var managerScript,isEnter,KeyboardSelector=pc.createScript("keyboardSelector");KeyboardSelector.attributes.add("manager",{type:"entity",title:"Manager"}),KeyboardSelector.attributes.add("key",{type:"number",title:"Key"}),KeyboardSelector.prototype.initialize=function(){this.isEnter=!1,this.app.touch?this.entity.element.on("touchstart",(()=>{this.managerScript.titleManager.selectKey(this.key),this.changeKey()})):(this.entity.element.on("mouseenter",(()=>this.mouseEnter())),this.entity.element.on("mouseleave",(()=>this.mouseExit()))),this.managerScript=this.manager.findComponent("script")},KeyboardSelector.prototype.update=function(e){this.isEnter&&(this.app.touch||this.app.mouse.isPressed(pc.MOUSEBUTTON_LEFT))&&this.changeKey()},KeyboardSelector.prototype.mouseEnter=function(){this.managerScript.titleManager.selectKey(this.key),this.isEnter=!0},KeyboardSelector.prototype.mouseExit=function(){this.isEnter=!1},KeyboardSelector.prototype.changeKey=function(){Module.range!=this.key&&(this.manager.sound._pitch=.01081*this.key+.8972,this.manager.sound.play("Select"),this.managerScript.titleManager.changeKey())};var managerScript,animator,PartSelector=pc.createScript("partSelector");PartSelector.attributes.add("selector",{type:"entity",title:"Selector"}),PartSelector.attributes.add("manager",{type:"entity",title:"Entity"}),PartSelector.attributes.add("part",{type:"number",title:"Part"}),PartSelector.prototype.initialize=function(){this.app.touch?this.entity.element.on("touchstart",(()=>this.selectPart(this.part))):this.entity.element.on("mousedown",(()=>this.selectPart(this.part))),this.managerScript=this.manager.findComponent("script").titleManager,this.animator=this.selector.findComponent("script").partSelectorAnimator},PartSelector.prototype.selectPart=function(t){switch(t){case 0:this.selector.setLocalPosition(-437.5,210,0),this.managerScript.selectKey(-2);break;case 1:this.selector.setLocalPosition(-262.5,210,0),this.managerScript.selectKey(3);break;case 2:this.selector.setLocalPosition(-87.5,210,0),this.managerScript.selectKey(8);break;case 3:this.selector.setLocalPosition(87.5,210,0),this.managerScript.selectKey(12);break;case 4:this.selector.setLocalPosition(262.5,210,0),this.managerScript.selectKey(15);break;case 5:this.selector.setLocalPosition(437.5,210,0),this.managerScript.selectKey(20)}this.animator.fire(),this.managerScript.changeKey(),this.entity.sound.play("Select")};var element,anim,t,PartSelectorAnimator=pc.createScript("partSelectorAnimator");PartSelectorAnimator.prototype.initialize=function(){this.element=this.entity.findComponent("element"),this.anim=!1,this.t=0},PartSelectorAnimator.prototype.update=function(e){if(this.anim){if(this.t+=2*e,this.t>1)return this.anim=!1,void(this.element.opacity=0);var i=EMath.correct2Out(this.t);this.element.width=EMath.lerp(150,160,i),this.element.height=EMath.lerp(250,260,i),this.element.opacity=1-this.t}},PartSelectorAnimator.prototype.fire=function(){this.anim=!0,this.t=0};var element,anim,t,v0,v1,TempoSelectorAnimator=pc.createScript("tempoSelectorAnimator");TempoSelectorAnimator.attributes.add("tempoFill",{type:"entity",title:"TempoFill",array:!0}),TempoSelectorAnimator.attributes.add("tempoIcon",{type:"entity",title:"TempoIcon",array:!0});var tempo0,tempo1,fill=[],icon=[];TempoSelectorAnimator.prototype.initialize=function(){this.element=this.entity.findComponent("element"),this.anim=!1,this.t=0,this.fill=[],this.fill[0]=this.tempoFill[0].findComponent("element"),this.fill[1]=this.tempoFill[1].findComponent("element"),this.fill[2]=this.tempoFill[2].findComponent("element"),this.fill[3]=this.tempoFill[3].findComponent("element"),this.fill[4]=this.tempoFill[4].findComponent("element"),this.icon=[],this.icon[0]=this.tempoIcon[0].findComponent("element"),this.icon[1]=this.tempoIcon[1].findComponent("element"),this.icon[2]=this.tempoIcon[2].findComponent("element"),this.icon[3]=this.tempoIcon[3].findComponent("element"),this.icon[4]=this.tempoIcon[4].findComponent("element")},TempoSelectorAnimator.prototype.update=function(e){if(this.anim){if(this.t>=1)return this.element.opacity=0,this.fill[this.tempo0].opacity=.5,this.fill[this.tempo1].opacity=1,this.icon[this.tempo0].color=new pc.Color(.5,.5,.5,1),this.icon[this.tempo1].color=new pc.Color(1,1,1,1),void(this.anim=!1);this.t+=4*e;var i,o,n=EMath.correct2Out(this.t);n=EMath.correct2Out(n),i=EMath.lerp(this.v0.x,this.v1.x,n),o=EMath.lerp(this.v0.y,this.v1.y,n),this.entity.setLocalPosition(i,o,0),this.element.opacity=EMath.lerp(.5,0,this.t),this.fill[this.tempo0].opacity=EMath.lerp(1,.5,n),this.fill[this.tempo1].opacity=EMath.lerp(.5,1,n);var c=EMath.lerp(1,.5,this.t),l=EMath.lerp(.5,1,this.t);this.icon[this.tempo0].color=new pc.Color(c,c,c,1),this.icon[this.tempo1].color=new pc.Color(l,l,l,1)}},TempoSelectorAnimator.prototype.fire=function(e){if(0<=e&&e<=4){switch(this.anim=!0,this.t=0,this.v0=new pc.Vec3,Module.tempo){case 0:this.v0=new pc.Vec3(-513.5,2.3,0);break;case 1:this.v0=new pc.Vec3(-476.5,-62.7,0);break;case 2:this.v0=new pc.Vec3(-514,-128.05,0);break;case 3:this.v0=new pc.Vec3(-247.5,-7.19,0);break;case 4:this.v0=new pc.Vec3(-210.6,-71.5,0)}switch(this.tempo0=Module.tempo,e){case 0:this.v1=new pc.Vec3(-513.5,2.3,0);break;case 1:this.v1=new pc.Vec3(-476.5,-62.7,0);break;case 2:this.v1=new pc.Vec3(-514,-128.05,0);break;case 3:this.v1=new pc.Vec3(-247.5,-7.19,0);break;case 4:this.v1=new pc.Vec3(-210.6,-71.5,0)}this.tempo1=e,Module.tempo=e,this.fill[0].opacity=.5,this.fill[1].opacity=.5,this.fill[2].opacity=.5,this.fill[3].opacity=.5,this.fill[4].opacity=.5,this.icon[0].color=new pc.Color(.5,.5,.5,1),this.icon[1].color=new pc.Color(.5,.5,.5,1),this.icon[2].color=new pc.Color(.5,.5,.5,1),this.icon[3].color=new pc.Color(.5,.5,.5,1),this.icon[4].color=new pc.Color(.5,.5,.5,1)}};var managerScript,animator,TempoSelector=pc.createScript("tempoSelector");TempoSelector.attributes.add("selector",{type:"entity",title:"Selector"}),TempoSelector.attributes.add("manager",{type:"entity",title:"Manager"}),TempoSelector.attributes.add("tempo",{type:"number",title:"Tempo"}),TempoSelector.prototype.initialize=function(){this.anim=!1,this.t=0,this.app.touch?this.entity.element.on("touchstart",(()=>this.selectTempo(this.tempo))):this.entity.element.on("mousedown",(()=>this.selectTempo(this.tempo))),this.managerScript=this.manager.findComponent("script").titleManager,this.animator=this.selector.findComponent("script").tempoSelectorAnimator},TempoSelector.prototype.selectTempo=function(t){this.animator.fire(t),this.managerScript.viewTempo(t),this.entity.sound.play("Select")};class Module{static range=-100;static tempo=2;static viewhiA=!0;static mode=0;static round=0;static scale=0;static time=0;static plusAmount=[];static minusAmount=[];static hertzLog=[];static plusLog=[];static minusLog=[];static pitchLog=[];static stabilityLog=[];static gameFinish=!1;static play=!1}var element,anim,t,vec,RangeSelectorAnimator=pc.createScript("rangeSelectorAnimator");RangeSelectorAnimator.prototype.initialize=function(){this.element=this.entity.findComponent("element"),this.anim=!1,this.t=0,Module.play&&this.entity.setLocalPosition(Module.viewhiA?-87.5:87.5,0,0)},RangeSelectorAnimator.prototype.update=function(i){if(this.anim){if(this.t>=1)return this.entity.setLocalPosition(this.vec?-87.5:87.5,0,0),void(this.anim=!1);this.t+=4*i;var e=EMath.correct2Out(this.t),n=EMath.lerp(this.vec?87.5:-87.5,this.vec?-87.5:87.5,e);this.entity.setLocalPosition(n,0,0),this.element.opacity=EMath.lerp(.5,.25,this.t)}},RangeSelectorAnimator.prototype.fire=function(i){this.anim=!0,this.t=0,this.vec=i};var managerScript,animator,RangeSelector=pc.createScript("rangeSelector");RangeSelector.attributes.add("selector",{type:"entity",title:"Selector"}),RangeSelector.attributes.add("manager",{type:"entity",title:"Manager"}),RangeSelector.attributes.add("vec",{type:"boolean",title:"Vec"}),RangeSelector.attributes.add("label",{type:"entity",title:"Label",array:!0}),RangeSelector.prototype.initialize=function(){this.app.touch?this.entity.element.on("touchstart",(()=>this.select(this.vec))):this.entity.element.on("mousedown",(()=>this.select(this.vec))),this.managerScript=this.manager.findComponent("script").titleManager,this.animator=this.selector.findComponent("script").rangeSelectorAnimator;for(var t=[],e=0;e<12;e++)t[e]=this.label[e].findComponent("element");Module.viewhiA?(t[0].text="lowG",t[1].text="- mid1G",t[2].text="mid1C",t[3].text="- mid2C",t[4].text="mid1F",t[5].text="- mid2F",t[6].text="mid2A",t[7].text="- hiA",t[8].text="mid2C",t[9].text="- hiC",t[10].text="mid2F",t[11].text="- hiF",this.label[0].setLocalPosition(-437.5,157,0),this.label[2].setLocalPosition(-262.5,157,0),this.label[4].setLocalPosition(-87.5,157,0),this.label[6].setLocalPosition(87.5,157,0),this.label[8].setLocalPosition(262.5,157,0),this.label[10].setLocalPosition(437.5,157,0)):(t[0].text="G2 - G3",t[1].text="",t[2].text="C3 - C4",t[3].text="",t[4].text="F3 - F4",t[5].text="",t[6].text="A3 - A4",t[7].text="",t[8].text="C4 - C5",t[9].text="",t[10].text="F4 - F5",t[11].text="",this.label[0].setLocalPosition(-437.5,142.755,0),this.label[2].setLocalPosition(-262.5,142.755,0),this.label[4].setLocalPosition(-87.5,142.755,0),this.label[6].setLocalPosition(87.5,142.755,0),this.label[8].setLocalPosition(262.5,142.755,0),this.label[10].setLocalPosition(437.5,142.755,0))},RangeSelector.prototype.select=function(t){if(Module.viewhiA!=t){Module.viewhiA=t;for(var e=[],i=0;i<12;i++)e[i]=this.label[i].findComponent("element");Module.viewhiA?(e[0].text="lowG",e[1].text="- mid1G",e[2].text="mid1C",e[3].text="- mid2C",e[4].text="mid1F",e[5].text="- mid2F",e[6].text="mid2A",e[7].text="- hiA",e[8].text="mid2C",e[9].text="- hiC",e[10].text="mid2F",e[11].text="- hiF",this.label[0].setLocalPosition(-437.5,157,0),this.label[2].setLocalPosition(-262.5,157,0),this.label[4].setLocalPosition(-87.5,157,0),this.label[6].setLocalPosition(87.5,157,0),this.label[8].setLocalPosition(262.5,157,0),this.label[10].setLocalPosition(437.5,157,0)):(e[0].text="G2 - G3",e[1].text="",e[2].text="C3 - C4",e[3].text="",e[4].text="F3 - F4",e[5].text="",e[6].text="A3 - A4",e[7].text="",e[8].text="C4 - C5",e[9].text="",e[10].text="F4 - F5",e[11].text="",this.label[0].setLocalPosition(-437.5,142.755,0),this.label[2].setLocalPosition(-262.5,142.755,0),this.label[4].setLocalPosition(-87.5,142.755,0),this.label[6].setLocalPosition(87.5,142.755,0),this.label[8].setLocalPosition(262.5,142.755,0),this.label[10].setLocalPosition(437.5,142.755,0)),this.animator.fire(t),this.entity.sound.play("Select"),-100!=Module.range&&this.managerScript.changeKey()}};var element,anim,t,vec,ModeSelectorAnimator=pc.createScript("modeSelectorAnimator");ModeSelectorAnimator.prototype.initialize=function(){this.element=this.entity.findComponent("element"),this.anim=!1,this.t=0,Module.play&&this.entity.setLocalPosition(0==Module.mode?212.65:451.068,-104.15,0)},ModeSelectorAnimator.prototype.update=function(e){if(this.anim){if(this.t>=1)return this.entity.setLocalPosition(this.vec?212.65:451.068,-104.15,0),void(this.anim=!1);this.t+=4*e;var i=EMath.correct2Out(this.t),o=EMath.lerp(this.vec?451.068:212.65,this.vec?212.65:451.068,i);this.entity.setLocalPosition(o,-104.15,0),this.element.opacity=EMath.lerp(.5,.25,this.t)}},ModeSelectorAnimator.prototype.fire=function(e){this.anim=!0,this.t=0,this.vec=0==e};var managerScript,animator,ModeSelector=pc.createScript("modeSelector");ModeSelector.attributes.add("selector",{type:"entity",title:"Selector"}),ModeSelector.attributes.add("manager",{type:"entity",title:"Manager"}),ModeSelector.attributes.add("vec",{type:"number",title:"Vec"}),ModeSelector.prototype.initialize=function(){this.app.touch?this.entity.element.on("touchstart",(()=>this.select(this.vec))):this.entity.element.on("mousedown",(()=>this.select(this.vec))),this.managerScript=this.manager.findComponent("script").titleManager,this.animator=this.selector.findComponent("script").modeSelectorAnimator},ModeSelector.prototype.select=function(e){Module.mode!=e&&(Module.mode=e,this.animator.fire(e),this.entity.sound.play("Select"))};var element,anim,t,StartButtonAnimator=pc.createScript("startButtonAnimator");StartButtonAnimator.prototype.initialize=function(){this.element=this.entity.findComponent("element"),this.anim=!1,this.t=0},StartButtonAnimator.prototype.update=function(i){if(this.anim){if(this.t>=1)return this.element.opacity=0,void(this.anim=!1);this.t+=4*i;var e=EMath.correct2Out(this.t);this.element.width=EMath.lerp(300,350,e),this.element.height=EMath.lerp(50,100,e),this.element.opacity=EMath.lerp(.5,0,this.t)}},StartButtonAnimator.prototype.fire=function(i){this.anim=!0,this.t=0,this.element.color=i?new pc.Color(1,0,0,0):new pc.Color(1,1,1)};var anim,t,sceneTransition,st,StartButton=pc.createScript("startButton");StartButton.attributes.add("startButtonEffect",{type:"entity",title:"startButtonEffect"}),StartButton.attributes.add("errorMessage",{type:"entity",title:"errorMessage"}),StartButton.attributes.add("screenMask",{type:"entity",title:"screenMask"}),StartButton.prototype.initialize=function(){this.app.touch?this.entity.element.on("touchstart",(()=>this.gameStart())):this.entity.element.on("mousedown",(()=>this.gameStart())),this.anim=!1,this.t=0,this.sceneTransition=!1,this.st=0,this.animator=this.startButtonEffect.findComponent("script").startButtonAnimator},StartButton.prototype.update=function(e){if(this.sceneTransition&&(this.st+=e,this.st>=.5)){var i=this.app.scenes.find("Game"),s=this.app.root.findByName("Root");return this.app.scenes.loadSceneHierarchy(i.url,(function(e,i){s.destroy()})),void(this.sceneTransition=!1)}this.anim&&(this.t-=e,this.t<=0&&(this.anim=!1,this.errorMessage.enabled=!1))},StartButton.prototype.gameStart=function(){var e=!1;-100==Module.range&&(e=!0,this.errorMessage.enabled=!0,this.t=2,this.anim=!0),this.animator.fire(e),this.entity.sound.play(e?"Beep":"Select"),e||(this.sceneTransition=!0,this.screenMask.findComponent("script").screenMaskAnimator.fire("f"))};var element,anim,t,ScreenMaskAnimator=pc.createScript("screenMaskAnimator");ScreenMaskAnimator.attributes.add("maskObj",{type:"entity",title:"maskObj"}),ScreenMaskAnimator.prototype.initialize=function(){this.element=this.entity.element,this.anim=!1,this.t=0},ScreenMaskAnimator.prototype.update=function(e){this.anim&&(this.t+=2*e,this.element.opacity=this.t,this.t>=1&&(this.anim=!1,this.element.opacity=1))},ScreenMaskAnimator.prototype.fire=function(e){"f"==e&&(this.anim=!0,this.maskObj.enabled=!0)};var audioContext,microphone,analyzer,MicTest=pc.createScript("micTest"),data=[];MicTest.prototype.initialize=function(){addEventListener("click",(async()=>{this.audioContext=new AudioContext,this.audioContext.sampleRate=8e3;const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.microphone=this.audioContext.createMediaStreamSource(t),this.analyzer=this.audioContext.createAnalyser(),this.microphone.connect(this.analyzer),this.data=new Float32Array(this.analyzer.fftSize)}))},MicTest.prototype.update=function(t){if(this.analyzer){this.analyzer.getFloatTimeDomainData(this.data);var e=SoundLibrary.analyzeSound(this.audioContext.sampleRate,this.data);this.entity.element.text=Math.round(e)+" Hz"}};var flame,circle1Element,circle2Element,anim,t,circleFrash,FlameAnimator=pc.createScript("flameAnimator");FlameAnimator.attributes.add("circle1",{type:"entity",title:"circle 1"}),FlameAnimator.attributes.add("circle2",{type:"entity",title:"circle 2"}),FlameAnimator.prototype.initialize=function(){this.flame=this.entity.element,this.circleFrash=!0,null!=this.circle1&&(this.circle1Element=this.circle1.findComponent("script").imageFrash,this.circle2Element=this.circle2.findComponent("script").imageFrash,this.circleFrash=!1),this.anim=!1,this.t=0,this.flame.width=0},FlameAnimator.prototype.update=function(i){if(this.anim){this.t+=i;var e=EMath.correct3(this.t);this.flame.width=EMath.lerp(0,1263,e),this.t>=.9&&!this.circleFrash&&(this.circleFrash=!0,this.circle1Element.fire(.5,1),this.circle2Element.fire(.5,1)),this.t>=1&&(this.flame.width=1263,this.anim=!1,this.enabled=!1)}},FlameAnimator.prototype.fire=function(){this.anim=!0,this.t=0};var GameCanvasAnimator=pc.createScript("gameCanvasAnimator");GameCanvasAnimator.attributes.add("entities",{type:"entity",title:"Entity",array:!0}),GameCanvasAnimator.attributes.add("manager",{type:"entity",title:"Manager"});var t,fired=[];GameCanvasAnimator.prototype.initialize=function(){this.fired=[],this.t=0},GameCanvasAnimator.prototype.update=function(i){this.t+=i,this.t>=0&&!this.fired[0]&&(this.entities[0].findComponent("script").flameAnimator.fire(),this.fired[0]=!0),this.t>=.1666&&!this.fired[1]&&(this.entities[1].findComponent("script").flameAnimator.fire(),this.fired[1]=!0),this.t>=.5&&!this.fired[2]&&(this.entities[2].findComponent("script").radialMask.fire(),this.fired[2]=!0),this.t>=.5&&!this.fired[3]&&(this.entities[3].findComponent("script").flameAnimator.fire(),this.fired[3]=!0),this.t>=.333&&!this.fired[4]&&(this.entities[4].findComponent("script").flameAnimator.fire(),this.fired[4]=!0),this.t>=.1666&&!this.fired[5]&&(this.entities[5].findComponent("script").flameAnimator.fire(),this.fired[5]=!0),this.t>=.5&&!this.fired[6]&&(this.entities[6].findComponent("script").imageFade.fire(!1),this.fired[6]=!0),this.t>=.666&&!this.fired[7]&&(this.entities[7].findComponent("script").imageFrash.fire(.5,1),this.fired[7]=!0),this.t>=.666&&!this.fired[8]&&(this.entities[8].findComponent("script").imageFrash.fire(.5,1),this.fired[8]=!0),this.t>=1&&!this.fired[9]&&(this.entities[9].findComponent("script").radialMask.fire(),this.fired[9]=!0),this.t>=1&&!this.fired[10]&&(this.entities[10].findComponent("script").textFrash.fire(),this.fired[10]=!0),this.t>=1.1666&&!this.fired[11]&&(this.entities[11].findComponent("script").imageFade.fire(!0),this.fired[11]=!0),this.t>=1.5&&!this.fired[12]&&(this.entities[12].findComponent("script").imageFade.fire(!0),this.fired[12]=!0),this.t>=1.666&&!this.fired[13]&&(this.entities[13].findComponent("script").imageFade.fire(!0),this.fired[13]=!0),this.t>=1.666&&!this.fired[14]&&(this.entities[14].findComponent("script").imageFade.fire(!0),this.fired[14]=!0),this.t>=2.1666&&!this.fired[15]&&(this.entities[15].findComponent("script").imageFrash.fire(.5,1),this.fired[15]=!0),this.t>=2.1666&&!this.fired[16]&&(this.entities[16].findComponent("script").imageFrash.fire(.5,1),this.fired[16]=!0),this.t>=2.333&&!this.fired[17]&&(this.entities[17].findComponent("script").textFrash.fire(),this.fired[17]=!0),this.t>=.666&&!this.fired[18]&&(this.entities[18].findComponent("script").sectionMaskAnimator.fire(),this.fired[18]=!0),this.t>=3&&!this.fired[19]&&(this.manager.findComponent("script").gameManager.startGame(),this.fired[19]=!0,this.enabled=!1)};var anim,t,SectionMaskAnimator=pc.createScript("sectionMaskAnimator");SectionMaskAnimator.prototype.initialize=function(){this.anim=!1,this.t=0,this.entity.element.width=2560},SectionMaskAnimator.prototype.update=function(i){this.anim&&(this.t+=i,this.entity.element.width=EMath.lerp(2560,0,this.t),this.t>=1&&(this.entity.element.width=0,this.anim=!1,this.enabled=!1))},SectionMaskAnimator.prototype.fire=function(){this.anim=!0,this.t=0};var element,textElement,anim,t,on,SectionIconAnimator=pc.createScript("sectionIconAnimator");SectionIconAnimator.attributes.add("child",{type:"entity",title:"Text"}),SectionIconAnimator.prototype.initialize=function(){this.element=this.entity.findComponent("element"),this.textElement=this.child.findComponent("element"),this.anim=!1,this.t=0},SectionIconAnimator.prototype.update=function(i){if(this.anim){if(this.t+=2*i,this.t>=1)return this.element.color=new pc.Color(this.on?1:.25,this.on?.5:.25,this.on?0:.25,1),this.textElement.color=this.on?new pc.Color(0,0,0,1):new pc.Color(1,1,1,1),void(this.anim=!1);var n=EMath.lerp(.25,1,this.on?this.t:1-this.t),e=EMath.lerp(.25,.5,this.on?this.t:1-this.t),o=EMath.lerp(.25,0,this.on?this.t:1-this.t),h=EMath.lerp(1,0,this.on?this.t:1-this.t);this.element.color=new pc.Color(n,e,o,1),this.textElement.color=new pc.Color(h,h,h,1)}},SectionIconAnimator.prototype.fire=function(i){this.anim=!0,this.t=0,this.on=i};var start,t,pianoPlay,round,roundLength,ready,micON,audioContext,microphone,analyzer,GameManager=pc.createScript("gameManager");GameManager.attributes.add("section",{type:"entity",title:"SectionIcons",array:!0}),GameManager.attributes.add("timeline",{type:"entity",title:"TimeLine"}),GameManager.attributes.add("scaleStar",{type:"entity",title:"ScaleStar"}),GameManager.attributes.add("notes",{type:"entity",title:"Notes",array:!0}),GameManager.attributes.add("noteRoot",{type:"entity",title:"noteRoot",array:!0}),GameManager.attributes.add("errorMessage",{type:"entity",title:"ErrorMessage"}),GameManager.attributes.add("result",{type:"entity",title:"result"}),GameManager.attributes.add("resultGraph",{type:"entity",title:"resultGraph",array:!0}),GameManager.attributes.add("resultGraphLine",{type:"entity",title:"resultGraphLine",array:!0}),GameManager.attributes.add("backToTitleButton",{type:"entity",title:"BackToTitleButton"}),GameManager.attributes.add("backToTitleButtonBack",{type:"entity",title:"BackToTitleButton"}),GameManager.attributes.add("backToTitleButtonText",{type:"entity",title:"BackToTitleButtonText"}),GameManager.attributes.add("backToTitleButtonMask",{type:"entity",title:"BackToTitleButtonMask"});var scale,testText,scoreGaugeEffect,scoreGaugeEffCount,hertzLine,hertzC,micWait,micWaitingTime,data=[],hertz=[];GameManager.prototype.initialize=function(){switch(this.start=!1,this.t=0,this.pianoPlay=this.entity.findComponent("script").pianoPlay,this.scoreGaugeEffect=this.entity.findComponent("script").scoreEffect,this.scoreGaugeEffCount=0,this.hertzLine=[],this.hertz=[],this.hertzC=0,Module.hertzLog=[],Module.plusLog=[],Module.minusLog=[],Module.pitchLog=[],Module.stabilityLog=[],Module.gameFinish=!1,this.micWait=!1,this.micWaitingTime=0,this.round=0,Module.tempo){case 0:this.roundLength=1;break;case 1:this.roundLength=.75;break;case 2:this.roundLength=.6;break;case 3:this.roundLength=.5;break;case 4:this.roundLength=.4285}this.ready=!1,this.microphoneReady()},GameManager.prototype.microphoneReady=async function(){this.audioContext=new AudioContext,this.audioContext.sampleRate=8e3,this.micWait=!0,this.micWaitingTime=0;const e=await navigator.mediaDevices.getUserMedia({audio:!0});this.microphone=this.audioContext.createMediaStreamSource(e),this.analyzer=this.audioContext.createAnalyser(),this.microphone.connect(this.analyzer),this.data=new Float32Array(this.analyzer.fftSize),this.micON=!0},GameManager.prototype.update=function(e){if(this.micWait&&(this.micWaitingTime+=e,this.micWaitingTime>5&&(this.errorMessage.enabled=!0,this.micWait=!1)),this.analyzer){this.analyzer.getFloatTimeDomainData(this.data);var i=SoundLibrary.analyzeSound(this.audioContext.sampleRate,this.data);this.scale=SoundLibrary.convertHertzToScale(i),Module.scale=this.scale}if(this.ready)this.micON&&(this.start=!0,this.ready=!1,this.micWait=!1,this.errorMessage.enabled=!1);else if(this.start){if(this.t+=e,Module.time=this.t,this.round<12&&this.t>=8*this.round*this.roundLength&&(this.pianoPlay.fire(this.round,Module.tempo),this.round>0&&this.section[this.round-1].findComponent("script").sectionIconAnimator.fire(!1),this.section[this.round].findComponent("script").sectionIconAnimator.fire(!0),this.round++,this.round>1&&(Module.hertzLog[this.round-2]=this.hertzLine),this.hertzLine=[]),12==this.round&&this.t>=96*this.roundLength+1){Module.hertzLog[11]=this.hertzLine,this.notes[0].setLocalPosition(-13.3333,-256,0),this.notes[1].setLocalPosition(0,-256,0),this.notes[2].setLocalPosition(13.3333,-256,0),this.noteRoot[11].setLocalPosition(0,0,20),this.round=13,this.start=!1,this.analyzer=null;for(var o=0,s=0,a=0,n=0;n<12;n++)o+=Module.pitchLog[n],s+=100-Module.stabilityLog[n],0==Module.pitchLog[n]&&a++;return o/=12,s/=12,o+=1.3,a>3&&(o=0,s=0),this.result.findComponent("script").resultCanvasAnimator.fire(o,s,"result"),this.scoreGaugeEffect.fire(0,0,0,0,0,0),void(Module.gameFinish=!0)}if(this.scoreGaugeEffCount<12&&this.t>=8*(this.scoreGaugeEffCount+1)*this.roundLength-this.roundLength+.4){this.scoreGaugeEffect.fire(Module.plusAmount[0],Module.plusAmount[1],Module.plusAmount[2],Module.minusAmount[0],Module.minusAmount[1],Module.minusAmount[2]);var r=(Module.plusAmount[0]+Module.plusAmount[1]+Module.plusAmount[2])/3;r>.95?r=1:r>.9?r=10*r-8.5:r>.8?r=4*r-3.1:r*=.125,Module.plusLog[this.scoreGaugeEffCount]=r,Module.minusLog[this.scoreGaugeEffCount]=Math.min((Module.minusAmount[0]+Module.minusAmount[1]+Module.minusAmount[2])/1.5,1);var u=(Module.plusAmount[0]+Module.plusAmount[1]+Module.plusAmount[2])/3;if(u>.8?u=3.3333*u-2.3333:u*=.416666,this.resultGraph[this.scoreGaugeEffCount].setLocalPosition(EMath.lerp(-519.567,519.567,this.scoreGaugeEffCount/11),EMath.lerp(-108.35,6.593,u),0),Module.pitchLog[this.scoreGaugeEffCount]=100*(Module.plusAmount[0]+Module.plusAmount[1]+Module.plusAmount[2])/3,Module.stabilityLog[this.scoreGaugeEffCount]=100*(Module.minusAmount[0]+Module.minusAmount[1]+Module.minusAmount[2])/3,this.scoreGaugeEffCount>0){var h=this.resultGraphLine[this.scoreGaugeEffCount-1].element,d=this.resultGraph[this.scoreGaugeEffCount-1].getLocalPosition(),l=this.resultGraph[this.scoreGaugeEffCount].getLocalPosition(),c=new pc.Vec3(l.x-d.x,l.y-d.y,0),m=Math.sqrt(c.x*c.x+c.y*c.y),p=(l.x-d.x)/m,g=180*Math.acos(p)/Math.PI;this.resultGraphLine[this.scoreGaugeEffCount-1].setLocalPosition(d.x,d.y,0),this.resultGraphLine[this.scoreGaugeEffCount-1].setLocalEulerAngles(0,0,l.y>d.y?g:-g),h.width=m}this.scoreGaugeEffCount++,12==this.scoreGaugeEffCount&&(this.backToTitleButton.findComponent("script").imageFade.fire(!1),this.backToTitleButtonBack.findComponent("script").imageFade.fire(!1),this.backToTitleButtonText.findComponent("script").textFade.fire(!1),this.backToTitleButtonMask.enabled=!0)}var M=this.t-SoundLibrary.latency,f=40/(3*this.roundLength)*(M-4*this.roundLength-8*(this.round-1)*this.roundLength)-20;this.timeline.setLocalPosition(f,5.5,5),this.scaleStar.setLocalPosition(f,(this.scale-Module.range)/2+2,6),-21<f&&f<21&&(this.hertzC>=5&&(this.hertz[this.hertzC-5]=(this.scale-Module.range)/2+2),this.hertzC++,10==this.hertzC&&(this.hertzC=5),this.hertzLine.push(new pc.Vec3(f,(this.hertz[0]+this.hertz[1]+this.hertz[2]+this.hertz[3]+this.hertz[4])/5,0)))}},GameManager.prototype.startGame=function(){this.ready=!0,this.t=0,this.round=0},GameManager.prototype.setNotes=function(){this.notes[0].setLocalPosition(-13.3333,1.5+.5*(0==Module.mode?this.round:1),0),this.notes[1].setLocalPosition(0,1.5+.5*(this.round+1),0),this.notes[2].setLocalPosition(13.3333,1.5+.5*(0==Module.mode?this.round:1),0);var e=Module.range+(0==Module.mode?this.round-1:0);this.notes[0].findComponent("script").noteScript.setProperty(this.round,0,e),this.notes[1].findComponent("script").noteScript.setProperty(this.round,1,e+(0==Module.mode?1:this.round)),this.notes[2].findComponent("script").noteScript.setProperty(this.round,2,e),this.round>1&&this.noteRoot[this.round-2].setLocalPosition(0,0,20)};var element,anim,t,round,pianoNum,interval,manager,PianoPlay=pc.createScript("pianoPlay");PianoPlay.attributes.add("pitchText",{type:"entity",title:"PitchText"}),PianoPlay.attributes.add("pianoSound",{type:"asset",title:"Piano",array:!0}),PianoPlay.attributes.add("pianoMask",{type:"entity",title:"PianoMask",array:!0}),PianoPlay.prototype.initialize=function(){switch(this.element=this.pitchText.findComponent("element"),this.anim=!1,this.t=0,this.pianoNum=0,Module.tempo){case 0:this.interval=1;break;case 1:this.interval=.75;break;case 2:this.interval=.6;break;case 3:this.interval=.5;break;case 4:this.interval=.4285}for(var i=0;i<13;i++)this.entity.sound._slots[i].duration=this.interval,this.entity.sound._slots[i].asset=this.pianoSound[Module.range+12+i];this.manager=this.entity.findComponent("script").gameManager},PianoPlay.prototype.update=function(i){if(this.anim&&(this.t+=i,this.t>=this.pianoNum*this.interval)){if(8==this.pianoNum)return this.anim=!1,void this.hideKey();var e=Module.range+(0==Module.mode?this.round:0);0==this.pianoNum||2==this.pianoNum?(this.viewKey(e),this.playKey(0==Module.mode?this.round:0)):1==this.pianoNum&&(this.viewKey(e+(0==Module.mode?1:this.round+1)),this.playKey(this.round+1),this.manager.setNotes()),4==this.pianoNum||6==this.pianoNum?this.viewKey(e):5==this.pianoNum&&this.viewKey(e+(0==Module.mode?1:this.round+1)),3!=this.pianoNum&&7!=this.pianoNum||this.hideKey(),this.pianoNum++}},PianoPlay.prototype.fire=function(i){this.anim=!0,this.t=0,this.pianoNum=0,this.round=i},PianoPlay.prototype.viewKey=function(i){this.element.text=SoundLibrary.convertScaleToString(i);for(var e=0;e<48;e++)this.pianoMask[e].enabled=!1;this.pianoMask[i+9].enabled=!0},PianoPlay.prototype.playKey=function(i){this.entity.sound.play(i+"")},PianoPlay.prototype.hideKey=function(){this.element.text="";for(var i=0;i<48;i++)this.pianoMask[i].enabled=!1};var splitN,noteLength,timing,scale,round,recordN,requestN,microError,errorRecord,measureN,preError,preMicroError,bestMicroError,voiceNotes,totalRequestN,totalRecordN,preVoiceNote,mostVibrate,vibrateRecord,vibrateCount,finish,NoteScript=pc.createScript("noteScript");NoteScript.attributes.add("noteId",{type:"number",title:"noteId"}),NoteScript.attributes.add("startX",{type:"number",title:"startX"}),NoteScript.attributes.add("noteEntity",{type:"asset",title:"template",array:!0}),NoteScript.attributes.add("correctEffects",{type:"asset",title:"correctEffects",array:!0}),NoteScript.attributes.add("parfectNote",{type:"asset",title:"parfectNote"}),NoteScript.attributes.add("noteRoot",{type:"entity",title:"noteRoot",array:!0}),NoteScript.attributes.add("correctParticle",{type:"entity",title:"correctParticle"}),NoteScript.prototype.initialize=function(){switch(this.noteLength=0,this.timing=-100,Module.tempo){case 0:this.noteLength=1;break;case 1:this.noteLength=.75;break;case 2:this.noteLength=.6;break;case 3:this.noteLength=.5;break;case 4:this.noteLength=.4285}for(this.splitN=1,this.splitN=1;this.noteLength/this.splitN>.2;this.splitN++);this.finish=!1,this.errorRecord=[];for(var t=0;t<13;t++)this.errorRecord[t]=0;this.correctParticle.findComponent("script").snowfrakeScript.fire(100)},NoteScript.prototype.setProperty=function(t,r,e){this.round=t-1,this.timing=(8*(t-1)+r+4)*this.noteLength,this.scale=e,this.finish=!1,this.measureN=0,this.errorRecord=[];for(var i=0;i<13;i++)this.errorRecord[i]=0;this.microError=0,this.recordN=0,this.requestN=0,this.bestMicroError=1,this.vibrateRecord=0,this.preError=-256,this.preMicroError=-256,this.vibrateCount=0,this.preVoiceNote=null,this.mostVibrate=0,this.voiceNotes=[],this.totalRecordN=0,this.totalRequestN=0},NoteScript.prototype.update=function(t){var r=Module.time-SoundLibrary.latency;if(!(this.finish||r<this.timing)){if(this.requestN++,this.totalRequestN++,r-this.timing>=(this.measureN+1)*this.noteLength/this.splitN){this.setVoiceLine(EMath.maxN(this.errorRecord)-6),this.measureN++,this.errorRecord=[];for(var e=0;e<13;e++)this.errorRecord[e]=0;this.microError=0,this.recordN=0,this.requestN=0;var i=this.getScore(),o=this.getStability();if(2*this.totalRecordN<this.totalRequestN&&(i=0,o=100),this.measureN==this.splitN&&(Module.plusAmount[this.noteId]=i/100,Module.minusAmount[this.noteId]=(100-o)/100,this.finish=!0,i>80))return void this.correctEffect()}if(-256!=Module.scale){var s=EMath.repeat(Module.scale-this.scale,-6,6),h=Math.round(s);Math.abs(s)<.4?h=0:Math.abs(s)<1&&(h=s>0?1:-1);var c=h+6;this.microError+=s-h,this.recordN++,this.totalRecordN++,this.errorRecord[c]++}}},NoteScript.prototype.setVoiceLine=function(t){if(this.recordN<this.requestN/2)this.preVoiceNote=null;else{var r;if(null!=this.preVoiceNote&&this.preError==t)this.preVoiceNote.addLength(13.3333/this.splitN);else r=0==t?this.noteEntity[0].resource.instantiate():this.noteEntity[1].resource.instantiate(),this.preVoiceNote=r.findComponent("script").voiceNoteScript,this.preVoiceNote.setLength(13.3333/this.splitN),this.noteRoot[this.round].addChild(r),r.setLocalPosition(this.startX+13.3333*this.measureN/this.splitN,this.entity.localPosition.y+t/2,0==t?1:3),0==t&&(this.voiceNotes[this.voiceNotes.length]=r.findComponent("sprite"));if(0==t&&Math.abs(this.microError/this.recordN)<this.bestMicroError&&(this.bestMicroError=Math.abs(this.microError/this.recordN)),-256!=this.preMicroError){var e=t+this.microError/this.recordN-this.preMicroError;e>this.mostVibrate&&(this.mostVibrate=e),this.vibrateRecord+=Math.abs(e),this.vibrateCount++}this.preError=t,this.preMicroError=t+this.microError/this.recordN}},NoteScript.prototype.correctEffect=function(){for(i=0;i<this.voiceNotes.length;i++)this.voiceNotes[i].spriteAsset=this.parfectNote;var t=this.correctEffects[0].resource.instantiate();this.app.root.addChild(t),t.setLocalPosition(this.startX+6.6666,this.entity.localPosition.y,5);var r=this.correctEffects[1].resource.instantiate();this.app.root.addChild(r),r.setLocalPosition(this.startX+6.6666,this.entity.localPosition.y,6),this.correctParticle.findComponent("script").snowfrakeScript.fire(this.entity.localPosition.y)},NoteScript.prototype.getScore=function(){return this.bestMicroError<.01?100:this.bestMicroError<.02?EMath.lerp(100,98,EMath.inverseLerp(.01,.02,this.bestMicroError)):this.bestMicroError<.03?EMath.lerp(98,95,EMath.inverseLerp(.02,.03,this.bestMicroError)):this.bestMicroError<.05?EMath.lerp(95,90,EMath.inverseLerp(.03,.05,this.bestMicroError)):this.bestMicroError<.1?EMath.lerp(90,80,EMath.inverseLerp(.05,.1,this.bestMicroError)):EMath.lerp(80,0,EMath.inverseLerp(.1,1,this.bestMicroError))},NoteScript.prototype.getStability=function(){if(this.vibrateCount<2)return 100;var t=this.vibrateRecord/this.vibrateCount;return t<.2?100:t<.4?EMath.lerp(100,90,EMath.inverseLerp(.2,.4,t)):t<.8?EMath.lerp(90,80,EMath.inverseLerp(.4,.8,t)):t<1.2?EMath.lerp(80,60,EMath.inverseLerp(.8,1.2,t)):t<2?EMath.lerp(60,30,EMath.inverseLerp(1.2,2,t)):t<3?EMath.lerp(30,0,EMath.inverseLerp(2,3,t)):0};var sprite,x,length,speed,VoiceNoteScript=pc.createScript("voiceNoteScript");VoiceNoteScript.prototype.initialize=function(){switch(this.sprite=this.entity.findComponent("sprite"),Module.tempo){case 0:this.speed=13.3333;break;case 1:this.speed=17.7777;break;case 2:this.speed=22.2222;break;case 3:this.speed=26.6666;break;case 4:this.speed=31.1125}this.x=.0625*-this.speed},VoiceNoteScript.prototype.update=function(t){this.x<this.length&&(this.x+=this.speed*t),this.sprite.width=Math.max(Math.min(this.x,this.length),0)},VoiceNoteScript.prototype.addLength=function(t){this.length+=t},VoiceNoteScript.prototype.setLength=function(t){this.length=t};var sprite,t,NoteCorrectEffect=pc.createScript("noteCorrectEffect");NoteCorrectEffect.prototype.initialize=function(){this.sprite=this.entity.findComponent("sprite"),this.t=0},NoteCorrectEffect.prototype.update=function(e){this.t+=e,this.sprite.width=EMath.lerp(14.8,16.8,this.t),this.sprite.height=EMath.lerp(2.5,4.5,this.t),this.sprite.opacity=1-this.t,this.t>=1&&this.entity.destroy()};var sprite,t,NoteCorrectEffect2=pc.createScript("noteCorrectEffect2");NoteCorrectEffect2.prototype.initialize=function(){this.sprite=this.entity.findComponent("sprite"),this.sprite.width=14.8,this.sprite.height=2.5,this.t=0},NoteCorrectEffect2.prototype.update=function(i){this.t+=2*i;EMath.correct2Out(this.t);this.sprite.opacity=-4*this.t*(this.t-1),this.t>=1&&this.entity.destroy()};var anim,t,y,SnowfrakeScript=pc.createScript("snowfrakeScript");SnowfrakeScript.attributes.add("startX",{type:"number",title:"startX"}),SnowfrakeScript.attributes.add("particles",{type:"entity",title:"Particles",array:!0});var particle=[];SnowfrakeScript.prototype.initialize=function(){this.t=0,this.anim=!1,this.particle=[],this.particle[0]=this.particles[0].findComponent("particlesystem"),this.particle[1]=this.particles[1].findComponent("particlesystem"),this.particle[2]=this.particles[2].findComponent("particlesystem"),this.particle[3]=this.particles[3].findComponent("particlesystem"),this.particle[4]=this.particles[4].findComponent("particlesystem"),this.particle[5]=this.particles[5].findComponent("particlesystem"),this.particle[6]=this.particles[6].findComponent("particlesystem")},SnowfrakeScript.prototype.update=function(i){if(this.anim){this.t+=4*i,this.t>1&&(this.t=1);var e=EMath.lerp(0,13.3333,this.t);return this.entity.setLocalPosition(this.startX+e,this.y,7),this.t>2?(this.t=0,void(this.anim=!1)):void 0}},SnowfrakeScript.prototype.fire=function(i){-20<=i&&i<=20&&(this.anim=!0,this.t=0,this.y=i,this.particle[0].reset(),this.particle[1].reset(),this.particle[2].reset(),this.particle[3].reset(),this.particle[4].reset(),this.particle[5].reset(),this.particle[6].reset(),this.particle[0].play(),this.particle[1].play(),this.particle[2].play(),this.particle[3].play(),this.particle[4].play(),this.particle[5].play(),this.particle[6].play())};var anim,t,plus,minus,plusEffCount,minusEffCount,plusEffScript,minusEffScript,plusAmount,minusAmount,prePlus,preMinus,plusPreElement,minusPreElement,ScoreEffect=pc.createScript("scoreEffect");ScoreEffect.attributes.add("plusEffect",{type:"entity",title:"plusEffect",array:!0}),ScoreEffect.attributes.add("minusEffect",{type:"entity",title:"minusEffect",array:!0}),ScoreEffect.attributes.add("plusGauge",{type:"entity",title:"plusGauge"}),ScoreEffect.attributes.add("minusGauge",{type:"entity",title:"minusGauge"}),ScoreEffect.attributes.add("plusPreGauge",{type:"entity",title:"plusPreGauge"}),ScoreEffect.attributes.add("minusPreGauge",{type:"entity",title:"minusPreGauge"}),ScoreEffect.prototype.initialize=function(){this.anim=!1,this.t=0,this.plusEffCount=0,this.minusEffCount=0,this.plusAmount=[],this.minusAmount=[],this.plusEffScript=[],this.plusEffScript[0]=this.plusEffect[0].findComponent("script").scoreGaugeAnimator,this.plusEffScript[1]=this.plusEffect[1].findComponent("script").scoreGaugeAnimator,this.plusEffScript[2]=this.plusEffect[2].findComponent("script").scoreGaugeAnimator,this.minusEffScript=[],this.minusEffScript[0]=this.minusEffect[0].findComponent("script").scoreGaugeAnimator,this.minusEffScript[1]=this.minusEffect[1].findComponent("script").scoreGaugeAnimator,this.minusEffScript[2]=this.minusEffect[2].findComponent("script").scoreGaugeAnimator,this.prePlus=0,this.preMinus=0,this.plusPreElement=this.plusPreGauge.element,this.minusPreElement=this.minusPreGauge.element},ScoreEffect.prototype.update=function(s){if(this.anim){if(this.t>=1)return this.anim=!1,this.plusGauge.setLocalScale(this.plus,1,1),this.minusGauge.setLocalScale(this.minus,1,1),this.plusPreElement.opacity=0,void(this.minusPreElement.opacity=0);this.t+=s;var i=EMath.correct2Out(EMath.correct2Out(this.t));this.plusGauge.setLocalScale(i*this.plus,1,1),this.minusGauge.setLocalScale(i*this.minus,1,1),this.plusEffCount<3&&this.t>=.15*this.plusEffCount&&(this.plusAmount[this.plusEffCount]>0&&this.plusEffScript[this.plusEffCount].fire(),this.plusEffCount++),this.minusEffCount<3&&this.t>=.15*this.minusEffCount&&(this.minusAmount[this.minusEffCount]>0&&this.minusEffScript[this.minusEffCount].fire(),this.minusEffCount++),this.plusPreElement.opacity=1-this.t,this.minusPreElement.opacity=1-this.t}},ScoreEffect.prototype.fire=function(s,i,u,e,n,f){this.anim=!0,this.t=0,this.plusPreElement&&(this.plusPreGauge.setLocalScale(this.prePlus,1,1),this.minusPreGauge.setLocalScale(this.preMinus,1,1),this.plusPreElement.opacity=1,this.minusPreElement.opacity=1);var p=(s+i+u)/3;this.plus=p>.95?1:p>.9?10*p-8.5:p>.8?4*p-3.1:.125*p,this.minus=Math.min((e+n+f)/1.5,1),this.plus<.05&&(this.plus=0,this.plusAmount[0]=0,this.plusAmount[1]=0,this.plusAmount[2]=0),this.minus<.05&&(this.minus=0,this.minusAmount[0]=0,this.minusAmount[1]=0,this.minusAmount[2]=0),this.prePlus=this.plus,this.preMinus=this.minus,this.plusAmount=[],this.minusAmount=[],this.plusAmount[0]=s,this.plusAmount[1]=i,this.plusAmount[2]=u,this.minusAmount[0]=e,this.minusAmount[1]=n,this.minusAmount[2]=f,this.plusEffCount=0,this.minusEffCount=0};var element,anim,t,ScoreGaugeAnimator=pc.createScript("scoreGaugeAnimator");ScoreGaugeAnimator.attributes.add("defaultColor",{type:"rgba",title:"defaultColor"}),ScoreGaugeAnimator.prototype.initialize=function(){this.element=this.entity.element,this.anim=!1,this.t=0},ScoreGaugeAnimator.prototype.update=function(e){if(!this.anim)return;if(this.t>=1)return this.anim=!1,void(this.element.opacity=0);this.t+=2*e;let i=EMath.lerp(1,1.5,EMath.correct2Out(this.t));this.entity.setLocalScale(i,i,1),this.element.opacity=1-this.t,this.entity.element.color=new pc.Color(EMath.lerp(1,this.defaultColor.r,this.t),EMath.lerp(1,this.defaultColor.g,this.t),EMath.lerp(1,this.defaultColor.b,this.t),1)},ScoreGaugeAnimator.prototype.fire=function(){this.anim=!0,this.t=0,this.element=this.entity.element,this.element.color=new pc.Color(1,1,1,1)};var lines,DrawLine=pc.createScript("drawLine");DrawLine.attributes.add("lineComponent",{type:"asset",title:"lineComponent"}),DrawLine.attributes.add("lineEntity",{type:"entity",title:"lineEntity"}),DrawLine.prototype.initialize=function(){this.lines=[]},DrawLine.prototype.draw=function(t){if(this.clearLine(),!(t.length<2))for(var e=[],i=0,n=1;n<t.length;n++){var s=t[n-1],a=t[n],r=new pc.Vec3((s.x+a.x)/2,(s.y+a.y)/2,0),l=new pc.Vec3(a.x-s.x,a.y-s.y,0),o=Math.sqrt(l.x*l.x+l.y*l.y);if(o>1||0==o||isNaN(o)){if(i<5)for(var h=0;h<e.length;h++)e[h].destroy();e=[],i=0}else{var y=(a.x-s.x)/o,p=180*Math.acos(y)/Math.PI,c=this.lineComponent.resource.instantiate();this.lineEntity.addChild(c),c.setLocalPosition(r.x,r.y,0),c.setLocalEulerAngles(0,0,a.y>s.y?p:-p);var d=c.findComponent("sprite");d.width=1.1*o,d.height=.13,this.lines.push(c),i++,e.push(c)}}},DrawLine.prototype.clearLine=function(){this.lines||(this.lines=[]);for(var t=0;t<this.lines.length;t++)this.lines[t].destroy();this.lines=[]};var anim,t,LineAnimator=pc.createScript("lineAnimator");LineAnimator.prototype.initialize=function(){this.anim=!1,this.t=0,this.entity.setLocalScale(0,1,1)},LineAnimator.prototype.update=function(i){if(this.anim){if(this.t>=1)return this.entity.setLocalScale(1,1,1),void(this.anim=!1);this.t+=1.333*i;var n=EMath.correct3(this.t);this.entity.setLocalScale(n,1,1)}},LineAnimator.prototype.fire=function(){this.anim=!0,this.t=0},LineAnimator.prototype.light=function(){this.entity.setLocalScale(1,1,1)};var anim,t,VLineAnimator=pc.createScript("vlineAnimator");VLineAnimator.prototype.initialize=function(){this.anim=!1,this.t=0,this.entity.setLocalScale(1,0,1)},VLineAnimator.prototype.update=function(i){if(this.anim){if(this.t>=1)return this.entity.setLocalScale(1,1,1),void(this.anim=!1);this.t+=1.333*i;var n=EMath.correct3(this.t);this.entity.setLocalScale(1,n,1)}},VLineAnimator.prototype.fire=function(){this.anim=!0,this.t=0};var anim,ResultCanvasAnimator=pc.createScript("resultCanvasAnimator");ResultCanvasAnimator.attributes.add("entities",{type:"entity",title:"Entity",array:!0});var t,fired=[];ResultCanvasAnimator.prototype.initialize=function(){this.anim=!1,this.fired=[],this.t=0,this.fire(12.222,12.222)},ResultCanvasAnimator.prototype.update=function(i){this.anim&&(this.t+=i,!this.fired[0]&&this.t>=0&&(this.entities[0].findComponent("script").resultMainFlameAnimator.fire(),this.entity.sound.play("Slot 1"),this.fired[0]=!0),!this.fired[1]&&this.t>=.3666&&(this.entities[1].findComponent("script").lineAnimator.fire(),this.fired[1]=!0),!this.fired[2]&&this.t>=.2666&&(this.entities[2].findComponent("script").lineAnimator.fire(),this.fired[2]=!0),!this.fired[3]&&this.t>=.2833&&(this.entities[3].findComponent("script").lineAnimator.fire(),this.fired[3]=!0),!this.fired[4]&&this.t>=0&&(this.entities[4].findComponent("script").lineAnimator.fire(),this.fired[4]=!0),!this.fired[5]&&this.t>=.9166&&(this.entities[5].findComponent("script").vlineAnimator.fire(),this.fired[5]=!0),!this.fired[6]&&this.t>=.8333&&(this.entities[6].findComponent("script").vlineAnimator.fire(),this.fired[6]=!0),!this.fired[7]&&this.t>=.75&&(this.entities[7].findComponent("script").vlineAnimator.fire(),this.fired[7]=!0),!this.fired[8]&&this.t>=.6666&&(this.entities[8].findComponent("script").vlineAnimator.fire(),this.fired[8]=!0),!this.fired[9]&&this.t>=.5833&&(this.entities[9].findComponent("script").vlineAnimator.fire(),this.fired[9]=!0),!this.fired[10]&&this.t>=.5&&(this.entities[10].findComponent("script").vlineAnimator.fire(),this.fired[10]=!0),!this.fired[11]&&this.t>=.4166&&(this.entities[11].findComponent("script").vlineAnimator.fire(),this.fired[11]=!0),!this.fired[12]&&this.t>=.5&&(this.entities[12].findComponent("script").vlineAnimator.fire(),this.fired[12]=!0),!this.fired[13]&&this.t>=.5833&&(this.entities[13].findComponent("script").vlineAnimator.fire(),this.fired[13]=!0),!this.fired[14]&&this.t>=.6666&&(this.entities[14].findComponent("script").vlineAnimator.fire(),this.fired[14]=!0),!this.fired[15]&&this.t>=.75&&(this.entities[15].findComponent("script").vlineAnimator.fire(),this.fired[15]=!0),!this.fired[16]&&this.t>=.8333&&(this.entities[16].findComponent("script").vlineAnimator.fire(),this.fired[16]=!0),!this.fired[17]&&this.t>=.9166&&(this.entities[17].findComponent("script").vlineAnimator.fire(),this.fired[17]=!0),!this.fired[18]&&this.t>=.75&&(this.entities[18].findComponent("script").imageFrash.fire(.5,1),this.fired[18]=!0),!this.fired[19]&&this.t>=.75&&(this.entities[19].findComponent("script").imageFrash.fire(.5,1),this.fired[19]=!0),!this.fired[20]&&this.t>=.3333&&(this.entities[20].findComponent("script").vlineAnimator.fire(),this.entities[21].findComponent("script").vlineAnimator.fire(),this.entities[22].findComponent("script").vlineAnimator.fire(),this.entities[23].findComponent("script").vlineAnimator.fire(),this.entities[24].findComponent("script").vlineAnimator.fire(),this.entities[25].findComponent("script").vlineAnimator.fire(),this.entities[26].findComponent("script").vlineAnimator.fire(),this.entities[27].findComponent("script").vlineAnimator.fire(),this.entities[28].findComponent("script").vlineAnimator.fire(),this.entities[29].findComponent("script").vlineAnimator.fire(),this.entities[30].findComponent("script").vlineAnimator.fire(),this.entities[31].findComponent("script").vlineAnimator.fire(),this.entities[32].findComponent("script").vlineAnimator.fire(),this.fired[20]=!0),!this.fired[21]&&this.t>=.5&&(this.entities[33].findComponent("script").textFrash.fire(),this.fired[21]=!0),!this.fired[22]&&this.t>=.55&&(this.entities[34].findComponent("script").textFrash.fire(),this.fired[22]=!0),!this.fired[23]&&this.t>=.6&&(this.entities[35].findComponent("script").textFrash.fire(),this.fired[23]=!0),!this.fired[24]&&this.t>=.65&&(this.entities[36].findComponent("script").textFrash.fire(),this.fired[24]=!0),!this.fired[25]&&this.t>=.7&&(this.entities[37].findComponent("script").textFrash.fire(),this.fired[25]=!0),!this.fired[26]&&this.t>=.75&&(this.entities[38].findComponent("script").textFrash.fire(),this.fired[26]=!0),!this.fired[27]&&this.t>=.8&&(this.entities[39].findComponent("script").textFrash.fire(),this.fired[27]=!0),!this.fired[28]&&this.t>=.85&&(this.entities[40].findComponent("script").textFrash.fire(),this.fired[28]=!0),!this.fired[29]&&this.t>=.9&&(this.entities[41].findComponent("script").textFrash.fire(),this.fired[29]=!0),!this.fired[30]&&this.t>=.95&&(this.entities[42].findComponent("script").textFrash.fire(),this.fired[30]=!0),!this.fired[31]&&this.t>=1&&(this.entities[43].findComponent("script").textFrash.fire(),this.fired[31]=!0),!this.fired[32]&&this.t>=1.05&&(this.entities[44].findComponent("script").textFrash.fire(),this.fired[32]=!0),!this.fired[33]&&this.t>=1&&(this.entities[45].findComponent("script").textFrash.fire(),this.entities[48].findComponent("script").textFrash.fire(),this.fired[33]=!0),!this.fired[34]&&this.t>=1.166&&(this.entities[46].findComponent("script").textFrash.fire(),this.entities[47].findComponent("script").textFrash.fire(),this.fired[34]=!0),!this.fired[35]&&this.t>=1.333&&(this.entities[49].findComponent("script").textFrash.fire(),this.entities[50].findComponent("script").textFrash.fire(),this.fired[35]=!0),!this.fired[36]&&this.t>=1.5&&(this.entities[51].findComponent("script").textFrash.fire(),this.fired[36]=!0),!this.fired[37]&&this.t>=1.666&&(this.entities[52].findComponent("script").textFrash.fire(),this.entities[53].findComponent("script").textFrash.fire(),this.fired[37]=!0),!this.fired[38]&&this.t>=3&&(this.entities[54].findComponent("script").imageFade.fire(!0),this.entities[54].element.useInput=!0,this.fired[38]=!0),!this.fired[39]&&this.t>=3.5&&(this.entities[55].findComponent("script").textFrash.fire(),this.fired[39]=!0),!this.fired[40]&&this.t>=4.5&&(this.entities[56].findComponent("script").textFrash.fire(),this.fired[40]=!0),!this.fired[41]&&this.t>=7&&(this.entities[56].findComponent("script").textFade.fire(!1),this.fired[41]=!0),!this.fired[42]&&this.t>=1.5&&(this.entities[57].findComponent("script").imageFrash.fire(.5,1),this.entities[69].findComponent("script").imageFrash.fire(.5,1),this.entity.sound.play("Slot 2"),this.fired[42]=!0),!this.fired[43]&&this.t>=1.55&&(this.entities[58].findComponent("script").imageFrash.fire(.5,1),this.entities[70].findComponent("script").imageFrash.fire(.5,1),this.fired[43]=!0),!this.fired[44]&&this.t>=1.6&&(this.entities[59].findComponent("script").imageFrash.fire(.5,1),this.entities[71].findComponent("script").imageFrash.fire(.5,1),this.fired[44]=!0),!this.fired[45]&&this.t>=1.65&&(this.entities[60].findComponent("script").imageFrash.fire(.5,1),this.entities[72].findComponent("script").imageFrash.fire(.5,1),this.fired[45]=!0),!this.fired[46]&&this.t>=1.7&&(this.entities[61].findComponent("script").imageFrash.fire(.5,1),this.entities[73].findComponent("script").imageFrash.fire(.5,1),this.fired[46]=!0),!this.fired[47]&&this.t>=1.75&&(this.entities[62].findComponent("script").imageFrash.fire(.5,1),this.entities[74].findComponent("script").imageFrash.fire(.5,1),this.fired[47]=!0),!this.fired[48]&&this.t>=1.8&&(this.entities[63].findComponent("script").imageFrash.fire(.5,1),this.entities[75].findComponent("script").imageFrash.fire(.5,1),this.fired[48]=!0),!this.fired[49]&&this.t>=1.85&&(this.entities[64].findComponent("script").imageFrash.fire(.5,1),this.entities[76].findComponent("script").imageFrash.fire(.5,1),this.fired[49]=!0),!this.fired[50]&&this.t>=1.9&&(this.entities[65].findComponent("script").imageFrash.fire(.5,1),this.entities[77].findComponent("script").imageFrash.fire(.5,1),this.fired[50]=!0),!this.fired[51]&&this.t>=1.95&&(this.entities[66].findComponent("script").imageFrash.fire(.5,1),this.entities[78].findComponent("script").imageFrash.fire(.5,1),this.fired[51]=!0),!this.fired[52]&&this.t>=2&&(this.entities[67].findComponent("script").imageFrash.fire(.5,1),this.entities[79].findComponent("script").imageFrash.fire(.5,1),this.fired[52]=!0),!this.fired[53]&&this.t>=2.05&&(this.entities[68].findComponent("script").imageFrash.fire(.5,1),this.fired[53]=!0),!this.fired[54]&&this.t>=1.1666&&(this.entities[84].findComponent("script").textFrash.fire(),this.entities[85].findComponent("script").textFrash.fire(),this.entities[86].findComponent("script").textFrash.fire(),this.entities[87].findComponent("script").textFrash.fire(),this.entities[88].findComponent("script").textFrash.fire(),this.entities[89].findComponent("script").textFrash.fire(),this.entities[90].findComponent("script").textFrash.fire(),this.entities[91].findComponent("script").textFrash.fire(),this.fired[54]=!0))},ResultCanvasAnimator.prototype.fire=function(i,e,s){if("result"==s){if(this.anim=!0,this.fired=[],this.t=0,0==i&&0==e)return this.entities[80].element.text="--.-",this.entities[81].element.text="--",this.entities[82].element.text="-.--",this.entities[82].setLocalPosition(8.362,-35.55,0),void this.entities[83].setLocalPosition(26.333,-35.55,0);i>99.9&&(i=100),this.entities[80].element.text=100==i?"100":i.toFixed(1),this.entities[81].element.text=e.toFixed();var n=i,r=e,h=100-.99*(n=n>=95?-.02*n+1.9:90<=n&&n<=95?-2*n+190:85<=n&&n<=90?-4*n+370:80<=n&&n<=85?-8*n+710:-.375*n+100)-(r=r>=99?-3.5*r+346.5:r>=95?-.125*r+12.375:r>=90?-.14*r+13.8:r>=80?-.08*r+8.4:-.0125*r+3);h>100&&(h=100),h<0&&(h=0),h>99.99?(this.entities[82].element.text="100",this.entities[82].setLocalPosition(13.492,-35.55,0),this.entities[83].setLocalPosition(28.965,-35.645,0)):(this.entities[82].element.text=h.toFixed(2),this.entities[82].setLocalPosition(30.473,-35.55,0),this.entities[83].setLocalPosition(48.444,-35.55,0))}};var element,anim,t,ResultMainFlameAnimator=pc.createScript("resultMainFlameAnimator");ResultMainFlameAnimator.prototype.initialize=function(){this.element=this.entity.element,this.anim=!1,this.t=0},ResultMainFlameAnimator.prototype.update=function(i){if(this.anim){if(this.t>=1)return this.element.height=275.25,this.element.opacity=1,void(this.anim=!1);this.t+=i,this.element.height=this.t<.5?EMath.lerp(0,275.25,EMath.correct2Out(2*this.t)):275.25,this.element.opacity=this.t}},ResultMainFlameAnimator.prototype.fire=function(){this.anim=!0,this.t=0};var text,anim,t,fadein,sa,ea,TextFade=pc.createScript("textFade");TextFade.prototype.initialize=function(){this.text=this.entity.findComponent("element")._text,this.anim=!1,this.t=0,this.fadein=!1},TextFade.prototype.update=function(i){this.anim&&(this.t+=i,this.text.opacity=pc.math.lerp(this.sa,this.ea,this.t),this.t>=1&&(this.text.opacity=this.ea,this.anim=!1,this.enabled=!1))},TextFade.prototype.fire=function(i){this.anim=!0,i?(this.sa=0,this.ea=1):(this.sa=1,this.ea=0)},TextFade.prototype.light=function(i){this.text.opacity=i?1:0};var anim,t,fired,lineRenderer,ResultMove=pc.createScript("resultMove");ResultMove.attributes.add("plusGauge",{type:"entity",title:"plusGauge"}),ResultMove.attributes.add("minusGauge",{type:"entity",title:"minusGauge"}),ResultMove.attributes.add("notes",{type:"entity",title:"Notes",array:!0}),ResultMove.attributes.add("noteRoot",{type:"entity",title:"noteRoot",array:!0}),ResultMove.attributes.add("keyText",{type:"entity",title:"keyText"}),ResultMove.prototype.initialize=function(){this.anim=!1,this.t=0,this.fired=!1,this.lineRenderer=this.entity.findComponent("script").drawLine},ResultMove.prototype.update=function(e){if(this.anim){if(this.t>=1)return this.anim=!1,void this.entity.setLocalPosition(0,-224.692,0);this.t+=e,this.entity.setLocalPosition(0,EMath.lerp(153.05,-224.692,EMath.correct2Out(EMath.correct2Out(this.t))),0)}},ResultMove.prototype.fire=function(e,i){if("result"==i){this.entity.sound.play("Select"),this.plusGauge.setLocalScale(Module.plusLog[e],1,1),this.minusGauge.setLocalScale(Module.minusLog[e],1,1),this.lineRenderer.draw(Module.hertzLog[e]),this.keyText.element.text=SoundLibrary.convertScaleToString(e+Module.range+(0==Module.mode?0:1)),this.notes[0].setLocalPosition(-13.3333,1.5+.5*(0==Module.mode?e+1:1),0),this.notes[1].setLocalPosition(0,1.5+.5*(e+2),0),this.notes[2].setLocalPosition(13.3333,1.5+.5*(0==Module.mode?e+1:1),0);for(var o=0;o<12;o++)this.noteRoot[o].setLocalPosition(0,0,20);this.noteRoot[e].setLocalPosition(0,0,0),this.fired||(this.anim=!0,this.t=0,this.fired=!0)}};var element,anim,t,GraphSelector=pc.createScript("graphSelector");GraphSelector.attributes.add("graphMoveCont",{type:"entity",title:"graphMove"}),GraphSelector.attributes.add("id",{type:"number",title:"Id"}),GraphSelector.prototype.initialize=function(){this.element=this.entity.element,this.anim=!1,this.t=0,this.app.touch?this.entity.element.on("touchstart",(()=>{this.fire("f")})):this.entity.element.on("mousedown",(()=>this.fire("f")))},GraphSelector.prototype.update=function(e){if(this.anim){if(this.t>=1)return this.element.opacity=0,void(this.anim=!1);this.t+=2*e,this.element.opacity=1-this.t}},GraphSelector.prototype.fire=function(e){"f"==e&&Module.gameFinish&&(this.anim=!0,this.t=0,this.graphMoveCont.findComponent("script").resultMove.fire(this.id,"result"))};var element,anim,t,ButtonSelectAnimator=pc.createScript("buttonSelectAnimator");ButtonSelectAnimator.attributes.add("x",{type:"number",title:"x"}),ButtonSelectAnimator.attributes.add("y",{type:"number",title:"y"}),ButtonSelectAnimator.prototype.initialize=function(){this.element=this.entity.element,this.anim=!1,this.t=0},ButtonSelectAnimator.prototype.update=function(e){if(this.anim){if(this.t>=1)return this.element.opacity=0,void(this.anim=!1);this.t+=4*e;var i=EMath.correct2Out(this.t);this.element.width=EMath.lerp(this.x,this.x+50,i),this.element.height=EMath.lerp(this.y,this.y+50,i),this.element.opacity=EMath.lerp(.5,0,this.t)}},ButtonSelectAnimator.prototype.fire=function(e){this.anim=!0,this.t=0};var animator,sceneTransition,st,fired,BackTotitleButton=pc.createScript("backTotitleButton");BackTotitleButton.attributes.add("startButtonEffect",{type:"entity",title:"startButtonEffect"}),BackTotitleButton.attributes.add("screenMask",{type:"entity",title:"screenMask"}),BackTotitleButton.prototype.initialize=function(){this.app.touch?this.entity.element.on("touchstart",(()=>this.backTitle())):this.entity.element.on("mousedown",(()=>this.backTitle())),this.sceneTransition=!1,this.st=0,this.animator=this.startButtonEffect.findComponent("script").buttonSelectAnimator,this.fired=!1,Module.play=!0},BackTotitleButton.prototype.update=function(t){if(this.sceneTransition&&(this.st+=t,this.st>=.5)){var i=this.app.scenes.find("Title"),e=this.app.root.findByName("Root");return this.app.scenes.loadSceneHierarchy(i.url,(function(t,i){e.destroy()})),void(this.sceneTransition=!1)}},BackTotitleButton.prototype.backTitle=function(){this.fired||(this.animator.fire(),this.entity.sound.play("Select"),this.sceneTransition=!0,this.fired=!0,this.screenMask.findComponent("script").screenMaskAnimator.fire("f"))};